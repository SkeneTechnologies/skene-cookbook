{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://skene.ai/schemas/skill_definition.json",
  "title": "Atomic Skill Definition",
  "description": "Schema for defining atomic, composable AI skills with security and execution metadata",
  "type": "object",
  "required": ["id", "name", "description", "domain", "security_risk_level"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "Unique identifier for the skill"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version number"
    },
    "name": {
      "type": "string",
      "minLength": 3,
      "maxLength": 100,
      "description": "Human-readable skill name"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 500,
      "description": "Clear description of what the skill does"
    },
    "domain": {
      "type": "string",
      "description": "Primary domain/category (e.g., ecosystem, marketing, security)"
    },
    "job_function": {
      "type": "string",
      "enum": [
        "engineering",
        "marketing",
        "sales",
        "customer_success",
        "product",
        "finance",
        "legal",
        "hr",
        "operations",
        "executive",
        "security",
        "data",
        "design"
      ],
      "description": "Primary job function this skill serves"
    },
    "jtbd": {
      "type": "object",
      "description": "Jobs to be Done framework",
      "properties": {
        "job": {
          "type": "string",
          "description": "The functional job (e.g., 'Track partner revenue attribution')"
        },
        "context": {
          "type": "string",
          "description": "When/where the job occurs"
        },
        "outcome": {
          "type": "string",
          "description": "Desired outcome/success criteria"
        }
      },
      "required": ["job", "outcome"]
    },
    "security_risk_level": {
      "type": "string",
      "enum": ["Low", "Medium", "High", "Critical"],
      "description": "Security risk classification based on data access and actions"
    },
    "security_requirements": {
      "type": "object",
      "properties": {
        "sandboxing_required": {
          "type": "boolean",
          "description": "Whether skill execution must be sandboxed"
        },
        "human_in_loop_required": {
          "type": "boolean",
          "description": "Whether human approval is required before execution"
        },
        "audit_logging": {
          "type": "boolean",
          "description": "Whether all executions must be logged for audit"
        },
        "data_access_scope": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["public", "internal", "confidential", "pii", "financial", "health"]
          },
          "description": "Types of data this skill accesses"
        },
        "risk_factors": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of specific risk factors (e.g., 'data_deletion', 'external_api_calls')"
        }
      }
    },
    "io_types": {
      "type": "object",
      "properties": {
        "input": {
          "type": "object",
          "description": "JSON Schema for expected input"
        },
        "output": {
          "type": "object",
          "description": "JSON Schema for output format"
        }
      }
    },
    "tools": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "required": {
            "type": "boolean"
          },
          "risk_level": {
            "type": "string",
            "enum": ["Low", "Medium", "High"]
          }
        }
      },
      "description": "External tools/APIs required by this skill"
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Other skill IDs this skill depends on"
    },
    "composability": {
      "type": "object",
      "properties": {
        "can_chain_with": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Skill IDs this can be chained with"
        },
        "output_compatible_with": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Skills that can consume this skill's output"
        }
      }
    },
    "metrics": {
      "type": "object",
      "properties": {
        "primary": {
          "type": "string"
        },
        "benchmarks": {
          "type": "object"
        }
      }
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "platforms": {
      "type": "object",
      "properties": {
        "claude": {
          "type": "object"
        },
        "cursor": {
          "type": "object"
        },
        "skeneflow": {
          "type": "object"
        }
      }
    }
  }
}
