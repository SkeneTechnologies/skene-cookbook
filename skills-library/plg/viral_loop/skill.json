{
  "id": "plg_viral_loop",
  "version": "1.0.0",
  "name": "Viral Loop Orchestrator",
  "description": "EXECUTION: Triggers and optimizes viral loops for organic user acquisition through referrals, invites, and sharing. Uses lifecycle, analytics, and messaging tools to orchestrate the viral flow. For strategy and design frameworks, see plg_frameworks/viral-loops.",
  "domain": "plg",
  "tools": [
    {
      "name": "lifecycle.get_segment",
      "required": true
    },
    {
      "name": "lifecycle.record_moment",
      "required": true
    },
    {
      "name": "analytics.track_event",
      "required": true
    },
    {
      "name": "analytics.get_metrics",
      "required": false
    },
    {
      "name": "resend.send_template",
      "required": false
    },
    {
      "name": "messaging.send_in_app",
      "required": false
    },
    {
      "name": "stripe.get_subscription",
      "required": false
    }
  ],
  "exitStates": [
    "referral_program",
    "advocacy",
    "community",
    "idle"
  ],
  "inputSchema": {
    "type": "object",
    "properties": {
      "userId": {
        "type": "string"
      },
      "viralTrigger": {
        "type": "string",
        "enum": [
          "aha_moment",
          "milestone",
          "share_prompt",
          "referral_request"
        ]
      },
      "incentiveEnabled": {
        "type": "boolean"
      }
    },
    "required": [
      "userId"
    ]
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "viralCoefficientContribution": {
        "type": "number"
      },
      "invitesSent": {
        "type": "number"
      },
      "invitesConverted": {
        "type": "number"
      },
      "referralCode": {
        "type": "string"
      }
    }
  },
  "metrics": {
    "primary": "viral_coefficient",
    "benchmarks": {
      "excellent": "> 1.0",
      "good": "0.5-1.0",
      "needs_improvement": "< 0.5"
    }
  },
  "temperature": 0,
  "tags": [
    "plg",
    "viral",
    "referral",
    "growth",
    "acquisition",
    "verified"
  ],
  "platforms": {
    "claude": {
      "triggers": [
        "help with Viral Loop Orchestrator"
      ]
    },
    "cursor": {},
    "skeneflow": {
      "tools": [
        {
          "name": "lifecycle.get_segment",
          "required": true
        },
        {
          "name": "lifecycle.record_moment",
          "required": false
        },
        {
          "name": "analytics.track_event",
          "required": false
        },
        {
          "name": "messaging.send_in_app",
          "required": false
        }
      ]
    }
  }
}
