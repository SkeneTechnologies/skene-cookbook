{
  "id": "superpowers/subagent-driven-development",
  "version": "1.0.0",
  "name": "subagent-driven-development",
  "description": "Use when executing implementation plans with independent tasks in the current session",
  "domain": "superpowers",
  "source": "external",
  "tools": [],
  "exitStates": [
    "success",
    "failure"
  ],
  "inputSchema": {
    "type": "object",
    "properties": {
      "planFilePath": {
        "type": "string",
        "description": "Path to the implementation plan file to execute",
        "pattern": "^.*\\.(md|txt)$"
      },
      "workingBranch": {
        "type": "string",
        "description": "Git branch name where implementation will occur (should be in worktree)",
        "pattern": "^(?!main$|master$).*$"
      },
      "contextInformation": {
        "type": "object",
        "description": "Additional context for subagents to understand the implementation environment",
        "properties": {
          "projectType": {
            "type": "string",
            "description": "Type of project (e.g., 'web-app', 'cli-tool', 'library')"
          },
          "primaryLanguage": {
            "type": "string",
            "description": "Primary programming language"
          },
          "testFramework": {
            "type": "string",
            "description": "Testing framework in use"
          },
          "relevantFiles": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Key files subagents should be aware of"
          },
          "conventions": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Project-specific coding conventions or standards"
          }
        },
        "additionalProperties": true
      },
      "skipFinalReview": {
        "type": "boolean",
        "description": "Whether to skip the final code review after all tasks complete",
        "default": false
      }
    },
    "required": [
      "planFilePath",
      "workingBranch"
    ],
    "additionalProperties": false
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "executionSummary": {
        "type": "object",
        "properties": {
          "totalTasks": {
            "type": "integer",
            "description": "Total number of tasks in the plan",
            "minimum": 0
          },
          "completedTasks": {
            "type": "integer",
            "description": "Number of tasks successfully completed",
            "minimum": 0
          },
          "failedTasks": {
            "type": "integer",
            "description": "Number of tasks that failed",
            "minimum": 0
          },
          "durationMinutes": {
            "type": "number",
            "description": "Total execution time in minutes",
            "minimum": 0
          }
        },
        "required": [
          "totalTasks",
          "completedTasks",
          "failedTasks"
        ]
      },
      "taskResults": {
        "type": "array",
        "description": "Detailed results for each task",
        "items": {
          "type": "object",
          "properties": {
            "taskNumber": {
              "type": "integer",
              "minimum": 1
            },
            "taskTitle": {
              "type": "string"
            },
            "status": {
              "type": "string",
              "enum": [
                "completed",
                "failed",
                "skipped"
              ]
            },
            "commits": {
              "type": "array",
              "items": {
                "type": "string",
                "pattern": "^[0-9a-f]{7,40}$"
              },
              "description": "Git commit SHAs produced for this task"
            },
            "specReviewIterations": {
              "type": "integer",
              "description": "Number of spec compliance review cycles needed",
              "minimum": 1
            },
            "codeQualityReviewIterations": {
              "type": "integer",
              "description": "Number of code quality review cycles needed",
              "minimum": 1
            },
            "questionsAsked": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Questions the implementer asked before/during work"
            },
            "issuesFound": {
              "type": "object",
              "properties": {
                "specCompliance": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Spec compliance issues found and fixed"
                },
                "codeQuality": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Code quality issues found and fixed"
                }
              }
            },
            "errorMessage": {
              "type": "string",
              "description": "Error message if task failed"
            }
          },
          "required": [
            "taskNumber",
            "taskTitle",
            "status"
          ]
        }
      },
      "finalReview": {
        "type": "object",
        "description": "Results from the final comprehensive code review",
        "properties": {
          "approved": {
            "type": "boolean"
          },
          "reviewSummary": {
            "type": "string"
          },
          "outstandingIssues": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "required": [
          "approved"
        ]
      },
      "nextSteps": {
        "type": "array",
        "items": {
          "type": "string"
        },
        "description": "Recommended next steps (typically finishing-a-development-branch)"
      },
      "allCommits": {
        "type": "array",
        "items": {
          "type": "string",
          "pattern": "^[0-9a-f]{7,40}$"
        },
        "description": "All git commit SHAs produced during execution"
      }
    },
    "required": [
      "executionSummary",
      "taskResults",
      "nextSteps"
    ]
  },
  "temperature": 0,
  "tags": [
    "superpowers",
    "imported",
    "verified"
  ],
  "platforms": {
    "claude": {
      "triggers": [
        "help with subagent driven development",
        "executing implementation plans with independent tasks in the current session"
      ]
    },
    "cursor": {},
    "skeneflow": {}
  },
  "security_controls": {
    "delete_operations": {
      "soft_delete": true,
      "retention_period_days": 30,
      "undelete_capable": true,
      "backup_before_delete": true,
      "multi_party_approval": true,
      "confirmation_required": {
        "enabled": true,
        "show_impact": true,
        "require_reason": true
      }
    }
  },
  "metadata": {
    "schemaGenerated": true,
    "schemaConfidence": 0.92
  }
}
